import{f as e,m as a,l,o as t,d as s,e as o,g as n,v as r,R as u,F as c,s as i,q as p,z as y}from"./vendor.e1762ece.js";import{s as d}from"./others.2db637bd.js";import{u as f,g as v}from"./index.a3cf159d.js";import{_ as m}from"./playlist-item.vue_vue_type_style_index_0_lang.e8a96a32.js";const x={class:"search-wrapper pt-24 h-full relative flex flex-col"},g={class:"absolute top-0 right-0 left-0 pt-4 px-2"},h=o("h2",{class:"dark:text-white text-xl font-bold"},"搜索",-1),k={class:"overflow-y-auto mt-4 flex-1"},w={key:0,class:"w-full text-center text-sm text-gray-400 my-4"},_=o("span",null,"加载中...",-1),b={key:1,class:"w-full text-center text-sm text-gray-400 my-4"};var j=e({setup(e){const j=f(),O=a((()=>j.state.player)),P=l(""),q=l(0),z=l(!1),C=l(!1),F=l([]);async function K(e=!1){try{C.value=!0,e||(q.value=0,F.value=[]);const{data:{result:a}}=await d({keywords:P.value,limit:20,offset:q.value,type:1});if(a.songs){const e=a.songs.map((e=>e.id)).join(","),{data:l}=await v(e);F.value=F.value.concat(l.songs),q.value+=20,z.value=a.hasMore}}catch(a){console.log(a)}finally{C.value=!1}}return l([]),(e,a)=>(t(),s("div",x,[o("header",g,[h,n(o("input",{"onUpdate:modelValue":a[1]||(a[1]=e=>P.value=e),type:"text",name:"keyword",id:"keyword",class:"mt-3 w-full text-base text-gray-600 placeholder-gray-600 font-semibold py-2 px-4 rounded outline-none",placeholder:"关键字",onKeypress:a[2]||(a[2]=u((e=>K()),["enter"]))},null,544),[[r,P.value]])]),o("ul",k,[(t(!0),s(c,null,i(F.value,((e,a)=>(t(),s(m,{class:"mb-1",key:a,track:e,onOnPlay:a=>p(O)._playTrack(0,e)},null,8,["track","onOnPlay"])))),128)),C.value?(t(),s("li",w,[_])):z.value?(t(),s("li",b,[o("span",{onClick:a[3]||(a[3]=e=>K(!0))},"加载更多")])):y("",!0)])]))}});export{j as default};
